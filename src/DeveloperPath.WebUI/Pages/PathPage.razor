@page "/paths/{pathkey}"
@using DeveloperPath.WebUI.Resources
@inject IStringLocalizer<LanguageResources> _localizer

<Condition Evaluation="_state == UIHelper.State.Loading">
    <Match>
        <MudProgressLinear Indeterminate="true" Color="Color.Primary"></MudProgressLinear>
    </Match>
</Condition>
<Condition Evaluation="_state == UIHelper.State.ContentReady">
    <Match>
        <MudText Typo="Typo.h1" Class="py-3">@Path.Title</MudText>
        <MudItem>
				    <Iterations Items="Path.Tags" Context="tagItem">
						    <MudChip Size="Size.Small">@tagItem</MudChip>
				    </Iterations>
				</MudItem>
				<MudItem Class="py-1">
				    <MudText Typo="Typo.body2">
						    @Path.Description
				    </MudText>
				</MudItem>

        <MudTreeView T="string">
            <Iterations Items="Modules" Context="moduleItem">
                <MudTreeViewItem Value="@moduleItem.Title" ExpandedIcon="@Icons.Filled.DoubleArrow" ExpandedIconColor="Color.Inherit">
                    <MudCardContent Class="py-1 px-5">
                        <MudItem>
                            <Iterations Items="moduleItem.Tags" Context="tagItem">
                                <MudChip Size="Size.Small" Color="Color.Dark">@tagItem</MudChip>
                            </Iterations>
                        </MudItem>
                        <MudItem Class="py-1">
                            <MudText Typo="Typo.body1">
                                @moduleItem.Description
                            </MudText>
                        </MudItem>
                    </MudCardContent>
                </MudTreeViewItem>
            </Iterations>
        </MudTreeView>
    </Match>
</Condition>
<Condition Evaluation="_state == UIHelper.State.NotFound">
    <Match>
        <MudText Typo="Typo.body1">
            @_localizer["NotFound"]
        </MudText>
    </Match>
</Condition>
<Condition Evaluation="_state == UIHelper.State.Error">
    <Match>
        <MudContainer Class="d-flex justify-center py-2 px-1 mt-6">
            <MudButton StartIcon="@Icons.Filled.Refresh"
                       Color="Color.Primary"
                       Size="Size.Large"
                       OnClick="Reload">
                @_localizer["FetchError"]
            </MudButton>
        </MudContainer>
    </Match>
</Condition>

@code {

}